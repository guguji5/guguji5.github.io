import{h as e,b as t,r as a,A as n,t as r,B as l,k as s,l as c,q as i,x as m}from"./vendor.6a8dc018.js";import{P as d,R as o,a4 as u,a5 as h,B as E,a6 as p,a7 as v,a0 as b}from"./index.366ccd84.js";import{w as f,a as x,b as y}from"./index.e28e6ead.js";/* empty css              */const{Option:g}=r,{confirm:k}=c;export default()=>{const c=e(),w=t(),[C,N]=a.useState([]),[I,S]=a.useState(""),[_,j]=a.useState(),[P,F]=a.useState(),R=a.useRef(null),Y=[{title:"级别",dataIndex:"priority",render:e=>a.createElement(i,{color:v[e-1]},"P",e)},{title:"策略名称",dataIndex:"rule_name",render:(e,t)=>a.createElement("div",{className:"table-active-text",onClick:()=>{c({type:"event/editItem",data:t}),w.push("/event/"+t.id)}},e)},{title:"资源分组",dataIndex:"res_classpaths",render:e=>a.createElement(a.Fragment,null,e?e.split(" ").map(((e,t)=>e?a.createElement(b,{text:e,key:t}):null)):"")},{title:"标签",dataIndex:"tags",render:e=>a.createElement(a.Fragment,null,e?e.trim().split(" ").map(((e,t)=>e?a.createElement(b,{text:e,key:t}):null)):"")},{title:"通知",dataIndex:"notify_group_objs",render:(e,t)=>{const{notify_user_objs:n}=t;let r=[];return e&&(r=r.concat(e.map((e=>e.name)))),n&&(r=r.concat(n.map((e=>e.nickname)))),a.createElement(a.Fragment,null,r?r.map(((e,t)=>e?a.createElement(b,{text:e,key:t}):null)):"")}},{title:"状态",width:80,dataIndex:"status",render:e=>e===x.Enable?y.Enable:y.UnEnable},{title:"发生时间",width:180,dataIndex:"trigger_time",render:e=>m(1e3*e).format("YYYY-MM-DD HH:mm:ss")},{title:"操作",width:100,dataIndex:"operator",render:(e,t)=>{const{id:n}=t;return a.createElement("div",{className:"table-operator-area"},a.createElement("div",{className:"table-operator-area-normal",onClick:()=>{c({type:"event/editItem",data:t}),w.push("/shield/add/event")}},"屏蔽"),a.createElement("div",{className:"table-operator-area-warning",onClick:()=>{k({title:"是否忽略该告警?",onOk:()=>{h([n]).then((()=>{s.success("已忽略该告警"),R.current.refreshList()}))},onCancel(){}})}},"忽略"))}}];return a.createElement(d,{icon:a.createElement(n,null),title:"未恢复告警事件"},a.createElement("div",{className:"event-content"},a.createElement("div",{className:"event-table-search"},a.createElement("div",{className:"event-table-search-left"},a.createElement(o,{className:"event-table-search-left-refresh",onClick:()=>{R.current.refreshList()}}),a.createElement(u,{placeholder:"策略名称、标签、资源分组",onSearch:S,className:"searchInput",style:{marginRight:8}}),a.createElement(r,{placeholder:"告警级别",allowClear:!0,style:{width:90},onChange:e=>{j(void 0!==e?Number(e):void 0)}},a.createElement(g,{value:f.First},"P",f.First),a.createElement(g,{value:f.Second},"P",f.Second),a.createElement(g,{value:f.Third},"P",f.Third)),a.createElement(r,{placeholder:"告警状态",allowClear:!0,style:{width:120},onChange:e=>{F(void 0!==e?Number(e):void 0)}},a.createElement(g,{value:x.Enable},y.Enable),a.createElement(g,{value:x.UnEnable},y.UnEnable))),a.createElement("div",{className:"event-table-search-right"},a.createElement(l,{type:"primary",disabled:0===C.length,onClick:()=>{k({title:"是否批量忽略告警?",onOk:()=>{h(C).then((()=>{s.success("已忽略告警"),R.current.refreshList()}))},onCancel(){}})}},"批量忽略"))),a.createElement(E,{fetchParams:{query:I,priority:_,status:P},ref:R,rowKey:"id",fetchHandle:p,columns:Y,rowSelection:{selectedRowKeys:C,onChange:e=>{console.log(e),N(e)}}})))};
